<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta 
      name="viewport" 
      content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles/productDetail.css" />  
    <title>Product Details</title>

    <script>
      function updateMainImage(imageUrl) {
        const displayedImage = document.getElementById("displayedImage");
        const thumbnails = document.querySelectorAll(".thumbnail img");
    
        // Update the main image
        displayedImage.src = imageUrl;
    
        // Update the active thumbnail
        thumbnails.forEach((thumbnail) => thumbnail.classList.remove("active-thumbnail"));
        const activeThumbnail = Array.from(thumbnails).find((thumbnail) => thumbnail.src === imageUrl);
        if (activeThumbnail) {
          activeThumbnail.classList.add("active-thumbnail");
        }
      }
    </script>
    
  </head>

  <body>
    <!-- <header id="header">
      <div class="logo">
        <img id="header-img" src="..\public\img\logo.png" alt="ShopEase" />
      </div>
      <nav id="nav-bar">
        <ul>
          <li><a class="nav-link" href="">Homepage</a></li>
          <li><a class="nav-link" href="">Notifications</a></li>
          <li><a class="nav-link" href="">Sign in</a></li>
          <li><a class="nav-link" href="">Register</a></li>
        </ul>
      </nav>
      <div class="profile-logo">
        <img id="header-img" src="..." alt="Profile" />
      </div>
    </header> -->


    <section class="search-container">
      <form class="search-bar" action="https://www.google.com.vn/" method="post">
        <input name="search-bar" type="text" placeholder="Search..." size="30">
        <button class="search-button" type="submit"> <img class="search-icon" src="..\public\img\magnifier.png"> </button>
      </form>

      <div class="cart-logo">
        <img id="cart-img" src="..\public\img\shopping-cart.png" alt="Profile" width="65" />
      </div>
    </section>


    <div class="product-details-container">
      <div class="product-image">
        <!-- Large display area -->
        <div class="main-image">
          <img id="displayedImage" src="<%= product.images[0] %>" alt="Product Image" />
        </div>
      
        <!-- Thumbnails list -->
        <div class="thumbnail-container">
          <% product.images.forEach((image, index) => { %>
          <div class="thumbnail">
            <img
              src="<%= image %>"
              alt="Thumbnail"
              onclick="updateMainImage('<%= image %>')"
              class="<%= index === 0 ? 'active-thumbnail' : '' %>"
            />
          </div>
          <% }); %>
        </div>
      </div>
      

      <div class="product-info">
        <section class="product-show">
          <h1 class="product-name"><%= product.name %></h1>
          <p class="product-price">$<%= product.price %></p>
  
          <label for="variations" class="variation-label">Variations</label>
          <select id="variations" class="product-variations">
              <% product.varians.forEach(variant => { %>
                  <option value="<%= variant %>"><%= variant %></option>
              <% }); %>
          </select>
        </section>

        <button class="add-to-cart-btn">Add to Cart</button>
      </div>
    </div>
    

    <div class="shop-section">
      <h2 class="shop-title">SHOP</h2>
      <div class="shop-card">
          <div class="shop-rating">
              <!-- Render star ratings dynamically if needed -->
            <% for (let i = 0; i < Math.floor(store.rate + 0.5); i++) { %> ⭐ <% } %>
            <% for (let i = Math.floor(store.rate + 0.5); i < 5; i++) { %> ☆ <% } %>
            </div>
          <div class="shop-info">
              <h3 class="shop-name"><%= store.info[0].name %></h3>
              <p class="shop-category">Category</p>
              <p id="categories" class="product-categories">
                <% product.category.forEach(cate => { %>
                  <%= cate %>,
                <% }); %>
              </p>
            </div>
      </div>
    </div>
  

    <div class="product-description">
      <h2>Product Description</h2>
      <p class="description-text"><%= product.description %></p>
    </div>
    

    <div class="latest-reviews">
      <h2>Latest Reviews</h2>
      <div class="reviews-container">
        <% product.reviews.forEach((review) => { %>
          <div class="review-card">
            <div class="review-rating">
                <% for (let i = 0; i < Math.floor(review.value + 0.5); i++) { %> ⭐ <% } %>
                <% for (let i = Math.floor(review.value + 0.5); i < 5; i++) { %> ☆ <% } %>
              </div>
              <h3 class="review-title"><%= review.title || "No title provided" %></h3>
              <p class="review-body"><%= review.body || "No review content" %></p>
              <div class="reviewer-info">
                <p class="review-date"><%= new Date(review.date).toLocaleString("en-US", { dateStyle: "medium", timeStyle: "short" }) %></p>
              </div>
          </div>
        <% }); %>
      </div>
    </div>
    

    <div class="leave-thought">
        <h2>Leave Your Thought</h2>
        <textarea class="comment-box" placeholder="Write your comment on the product."></textarea>
    </div>
  



    <!--  -->
  </body>
</html>